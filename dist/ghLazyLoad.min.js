/*! ghLazyLoad 1.0.0 23-06-2017 */
!function(){}(angular.module("ghLazyLoad",[]).directive("ghLazyLoad",["$window","$document","$timeout",function(a,b,c){return{restrict:"E",scope:{image:"=ngModel",options:"=ghOptions"},templateUrl:"templates/LazyImage.html",link:function(d,e){var f={debug:!1,scroller:"window",classes:"ghLazyLoad",mode:"URL"};angular.isUndefined(d.options.debug)&&(d.options.debug=f.debug),angular.isUndefined(d.options.scroller)&&(d.options.scroller=f.scroller),angular.isUndefined(d.options.classes)&&(d.options.classes=f.classes),angular.isUndefined(d.options.mode)&&(d.options.mode=f.mode),"url"===d.options.mode.toLowerCase()?(d.imageModel={},d.imageModel.name="",d.imageModel.fullPath=d.image,d.imageModel.alt=""):d.imageModel=d.image;var g="window"===d.options.scroller?a:b[0].querySelector(d.options.scroller),h=0;d.$onScreen=!1;var i=function(b){var d;return function(){var e=this,f=arguments;a.requestAnimationFrame?(a.cancelAnimationFrame(d),d=a.requestAnimationFrame(function(){b.apply(e,f),d=null})):(c.cancel(d),d=c(function(){b.apply(e,f),d=null},62.5))}},j=function(){var b=h,c=e.children()[0].getBoundingClientRect().top,f=c-b,i="window"===d.options.scroller?a.innerHeight:g.clientHeight;"window"===d.options.scroller&&(f=c-b);var j=f<=b+i;d.options.debug&&console.dir(d.imageModel.fullPath+": "+j.toString()),d.$onScreen=j,d.$onScreen&&(d.realSrc=d.imageModel.fullPath,e.find("img").bind("load",function(){var a=e.find("img")[0];d.image.naturalHeight=a.naturalHeight,d.image.naturalWidth=a.naturalWidth,d.image.height=a.height,d.image.width=a.width}),d.options.debug&&console.dir(d.imageModel.fullPath+" -- Has been loaded."),d.$apply()),j&&m()},k=i(j),l=function(){h="window"===d.options.scroller?g.scrollY:g.scrollTop,k(j)},m=function(){angular.element(g).off("scroll",l)},n=function(){j()};angular.element(g).on("scroll",l),d.$on("$destroy",m),c(n)}}}])),angular.module("ghLazyLoad").run(["$templateCache",function(a){a.put("templates/LazyImage.html",'<img ng-class="options.classes" ng-attr-alt="{{imageModel.alt}}" ng-src="{{realSrc}}"/>\n')}]);